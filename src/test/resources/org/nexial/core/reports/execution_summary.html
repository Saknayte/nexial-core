<html xmlns="http://www.w3.org/1999/html" xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css"/>
    <!--<link rel="stylesheet" href="https://nexiality.github.io/documentation/assets/report/execution_summary.css"/>-->
    <link rel="stylesheet" href="file:///Users/ml093043/projects/nexial/documentation/assets/report/execution_summary.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!--<script src="https://nexiality.github.io/documentation/assets/report/execution_summary.js"></script>-->
    <script src="file:///Users/ml093043/projects/nexial/documentation/assets/report/execution_summary.js"></script>
</head>
<body>

<div class="title">
    Execution Summary for <span data-th-utext="${summary.name}">PROJECT_PLAN_WITH_RUNID</span>
    <div class="showhide-all">
        <i class="fas fa-minus-circle" onclick="hideAllSections()" title="minimize all sections"></i>
        <i class="fas fa-plus-circle" onclick="showAllSections()" title="restore all sections"></i>
    </div>
</div>

<div class="execMeta canHide">
    <div class="showhide" target="execMeta">
        <i class="fas fa-minus-square" onclick="hideSection(this)" title="minimize this section"></i>
        <i class="fas fa-plus-square" onclick="showSection(this)" title="restore this section"></i>
    </div>

    <table id="execMeta" class="execMeta" cellpadding="4" cellspacing="3">
        <tbody>
        <tr>
            <td nowrap="nowrap" class="execLabel">run from:</td>
            <th width="100%" class="execValue" data-th-utext="${execution.get('run from')}">HOSTNAME (HOST OS)</th>
        </tr>
        <tr>
            <td nowrap="nowrap" class="execLabel">run user:</td>
            <th class="execValue" data-th-utext="${execution.get('run user')}">USER_NAME</th>
        </tr>
        <tr>
            <td nowrap="nowrap" class="execLabel">time span:</td>
            <th class="execValue" data-th-utext="${execution.get('time span')}">10/30/2018 01:31:39 - 10/30/2018 01:33:09</th>
        </tr>
        <tr>
            <td nowrap="nowrap" class="execLabel">duration:</td>
            <th class="execValue" data-th-utext="${execution.get('duration')}">00:01:29.693</th>
        </tr>
        <tr>
            <td nowrap="nowrap" class="execLabel">total steps:</td>
            <th class="execValue"><pre data-th-utext="${execution.get('total steps')}"> 63</pre></th>
        </tr>
        <tr>
            <td nowrap="nowrap" class="execLabel">executed steps:</td>
            <th class="execValue"><pre data-th-utext="${execution.get('executed steps')}"> 63 (100%)</pre></th>
        </tr>
        <tr>
            <td nowrap="nowrap" class="execLabel">passed:</td>
            <th class="execValue"><pre data-th-utext="${execution.get('passed')}"> 63 (100%)</pre></th>
        </tr>
        <tr>
            <td nowrap="nowrap" class="execLabel">failed:</td>
            <th class="execValue"><pre data-th-utext="${execution.get('failed')}"> 0 (0.00%)</pre></th>
        </tr>
        <tr>
            <td nowrap="nowrap" class="execLabel">nexial version:</td>
            <th class="execValue" data-th-utext="${execution.get('nexial version')}">Nexial 1.8.162</th>
        </tr>
        <tr>
            <td nowrap="nowrap" class="execLabel">java version:</td>
            <th class="execValue" data-th-utext="${execution.get('java version')}">1.8.0_181</th>
        </tr>
        <tr>
            <td nowrap="nowrap" class="execLabel">log:</td>
            <th class="execValue" data-th-utext="${execution.get('log')}"><a href="javascript:alert('not implemented');">nexial log</a></th>
        </tr>
        <tr>
            <td nowrap="nowrap" class="execLabel">runtime args:</td>
            <th class="execValue" data-th-utext="${summary.referenceData.get('runtime args')}">-script /Users/ml093043/projects/ep/jody/artifact/script/SL_Scheduler_Regression.xlsx -scenario Job_CRUD</th>
        </tr>
        <tr>
            <td nowrap="nowrap" class="execLabel">JAVA_OPT:</td>
            <th class="execValue" data-th-utext="${summary.referenceData.get('JAVA_OPT')}">-Dnexial.generateOutput=TRUE -Dnexial.outputToCloud=TRUE</th>
        </tr>
        </tbody>
    </table>
</div>

<div data-th-if="${summary.error}">
    <div class="errorSection">
        <span class="errorPrompt">Test(s) did not complete due to fatal error:</span>
        <b data-th-utext="${summary.error.message}">Exception</b>
        <br/>
        <pre class="errorStackTrace" data-th-utext="${summary.errorStackTrace}">stack trace goes here...</pre>
        <span class="errorPrompt">Check log file for more details</span>
    </div>
    <br/>
</div>

<div class="result-controls">
    <i class="fas fa-frown-open" onclick="collapsePassRows();"> Only Failures</i>
    <i class="fas fa-theater-masks" onclick="showPassRows();"> All Results</i>
</div>

<div class="exec-summary-header">
    <table cellspacing="0" cellpadding="5" border="0" width="100%">
        <tr>
            <th class="label label-title">Script</th>
            <th class="label label-title">Data</th>
            <th class="label label-iteration">Iterations</th>
            <th class="label label-datetime">Start Date/Time</th>
            <th class="label label-time">Duration</th>
            <th class="label label-num">Total</th>
            <th class="label label-num">Pass</th>
            <th class="label label-num">Fail</th>
            <th class="label label-num" width="100%">Success %</th>
        </tr>
    </table>
</div>

<div class="exec-summary" data-th-if="#{summary.nestedExecutions}" data-th-each="script,scriptStat : ${summary.nestedExecutions}">

    <div class="planStep canHide" data-th-id="'planStep' + ${scriptStat.count}">
        <div class="showhide" data-th-attr="target='planStep' + ${scriptStat.count} + 'details'" data-th-if="#{script.nestedExecutions}">
            <i class="fas fa-minus-square" onclick="hideSection(this)" title="minimize this section"></i>
            <i class="fas fa-plus-square" onclick="showSection(this)" title="restore this section"></i>
        </div>

        <div class="plan-step-summary">
            <table cellspacing="0" cellpadding="5" border="0">
                <tr data-th-class="${script.failCount > 0 ? 'hasFailure' : 'noFailure'}">
                    <td class="value value-title" data-th-text="${@org.nexial.commons.utils.FileUtil@extractFilename(script.scriptFile)}" title="${@org.nexial.commons.utils.FileUtil@extractFilename(script.scriptFile)}">Payroll_Processing_Summer_Special.xlsx</td>
                    <th:block data-th-if="${script.dataFile}">
                        <td class="value value-title" data-th-utext="${@org.nexial.commons.utils.FileUtil@extractFilename(script.dataFile)}" title="${script.dataFile}">Payroll_Processing_Summer_Special.data.xlsx</td>
                    </th:block>
                    <th:block data-th-if="${script.dataFile == null and script.nestedExecutions and script.nestedExecutions.get(0).referenceData.containsKey('Data File')}">
                        <td class="value value-title" data-th-utext="${script.nestedExecutions.get(0).referenceData.get('Data File')}" title="${script.nestedExecutions.get(0).referenceData.get('Data File')}">Payroll_Processing_Summer_Special.data.xlsx</td>
                    </th:block>
                    <td class="value value-iteration" data-th-utext="${script.nestedExecutions.size()}">1234</td>
                    <td class="value value-datetime" data-th-utext="${#dates.format(new java.util.Date(script.startTime), 'yyyy/MM/dd HH:mm:ss')}">2018/12/16 12:53:21</td>
                    <td class="value value-time value-tally" data-th-utext="${#dates.format(#dates.create(0,0,0,0,0,0, (script.endTime - script.startTime)), 'HH:mm:ss')}">00:42:11</td>
                    <td class="value value-num value-tally" data-th-utext="${#numbers.formatInteger(script.totalSteps, 1, 'DEFAULT')}">23456</td>
                    <td class="value value-num value-tally" data-th-utext="${#numbers.formatInteger(script.passCount, 1, 'DEFAULT')}">12345</td>
                    <td class="value value-num value-tally" data-th-utext="${#numbers.formatInteger(script.failCount, 1, 'DEFAULT')}">1001</td>
                    <td class="value value-num value-tally " data-th-attrappend="class=${script.passCount == script.executed ? 'allPass' : 'hasFailure'}" data-th-utext="${#numbers.formatDecimal((script.passCount * 1.0 / script.executed) * 100, 1, 2, 'DEFAULT')} + '%'">98.12%</td>
                </tr>
            </table>
        </div>

        <div class="iteration canHide" data-th-attr="id='planStep' + ${scriptStat.count} + 'details'" data-th-if="#{script.nestedExecutions}">
            <table cellspacing="0" cellpadding="5" border="0">
                <tr class="record-header">
                    <th class="label">Iteration</th>
                    <th class="label">Scenario</th>
                    <th class="label">Activity</th>
                    <th class="label label-datetime">Start Date/Time</th>
                    <th class="label label-time">Duration</th>
                    <th class="label label-num">Total</th>
                    <th class="label label-num">Pass</th>
                    <th class="label label-num">Fail</th>
                    <th class="label label-num">Success %</th>
                    <th class="label">&nbsp;</th>
                </tr>

                <th:block data-th-if="${script.nestedExecutions}" data-th-each="iteration : ${script.nestedExecutions}">
                <tr class="record" data-th-class="${iteration.failCount > 0 ? 'hasFailure' : 'noFailure'}">
                    <td class="value value-title" data-th-attr="title=${iteration.name}">
                        <th:block data-th-utext="${iteration.name}">Payroll_Processing_Summer_Special.001.xlsx</th:block>
                        <div class="value-scriptRef" data-th-if="${iteration.referenceData.size() > 0}">
                            <i class="fas fa-info-circle info" title="Reference Data labeled as nexial.scriptRef.*"></i>
                            <table cellspacing="0" cellpadding="0">
                            <th:block data-th-each="data : ${iteration.referenceData}">
                            <th:block data-th-if="${data.key != 'JAVA_OPT' and data.key != 'runtime args' and data.key != 'Data File'}">
                            <tr>
                                <td class="label-ref" data-th-attr="title=${data.key}" data-th-utext="${data.key + ':'}">Tax Year:</td>
                                <td class="value-ref" data-th-attr="title=${data.value}" data-th-utext="${data.value}">2018</td>
                            </tr>
                            </th:block>
                            </th:block>
                            </table>
                        </div>
                    </td>
                    <td colspan="2" class="value spacer2">&nbsp;</td>
                    <td class="value value-datetime" data-th-utext="${#dates.format(new java.util.Date(iteration.startTime), 'yyyy/MM/dd HH:mm:ss')}">2018/12/16 12:53:21</td>
                    <td class="value value-time value-tally" data-th-utext="${#dates.format(#dates.create(0,0,0,0,0,0, (iteration.endTime - iteration.startTime)), 'HH:mm:ss')}">00:42:11</td>
                    <td class="value value-num value-tally" data-th-utext="${#numbers.formatInteger(iteration.executed, 1, 'DEFAULT')}">23456</td>
                    <td class="value value-num value-tally" data-th-utext="${#numbers.formatInteger(iteration.passCount, 1, 'DEFAULT')}">12345</td>
                    <td class="value value-num value-tally" data-th-utext="${#numbers.formatInteger(iteration.failCount, 1, 'DEFAULT')}">10001</td>
                    <td class="value value-num value-tally " data-th-attrappend="class=${iteration.passCount == iteration.executed ? 'allPass' : 'hasFailure'}" data-th-utext="${#numbers.formatDecimal((iteration.passCount * 1.0 / iteration.executed) * 100, 1, 2, 'DEFAULT')} + '%'">98.12%</td>
                </tr>

                <th:block data-th-if="${iteration.nestedExecutions}" data-th-each="scenario : ${iteration.nestedExecutions}">
                <tr class="record" data-th-class="${scenario.failCount > 0 ? 'hasFailure' : 'noFailure'}">
                    <td class="value spacer2">&nbsp;</td>
                    <td class="value value-title" data-th-attr="title=${scenario.name}">
                        <th:block data-th-utext="${scenario.name}">Scenario 123.7</th:block>
                        <div class="value-scenarioRef" data-th-if="${scenario.referenceData.size() > 0}">
                            <i class="fas fa-info-circle info" title="Reference Data labeled as nexial.scenarioRef.*"></i>
                            <table cellspacing="0" cellpadding="0">
                            <th:block data-th-each="data : ${scenario.referenceData}">
                            <tr>
                                <td class="label-ref" data-th-attr="title=${data.key}" data-th-utext="${data.key + ':'}">Tax Year:</td>
                                <td class="value-ref" data-th-attr="title=${data.value}" data-th-utext="${data.value}">2018</td>
                            </tr>
                            </th:block>
                            </table>
                        </div>
                    </td>
                    <td class="value spacer"></td>

                    <td class="value value-datetime" data-th-utext="${#dates.format(new java.util.Date(scenario.startTime), 'yyyy/MM/dd HH:mm:ss')}">2018/12/16 12:53:21</td>
                    <td class="value value-time value-tally" data-th-utext="${#dates.format(#dates.create(0,0,0,0,0,0, (scenario.endTime - scenario.startTime)), 'HH:mm:ss')}">00:42:11</td>
                    <td class="value value-num value-tally" data-th-utext="${#numbers.formatInteger(scenario.executed, 1, 'DEFAULT')}">23456</td>
                    <td class="value value-num value-tally" data-th-utext="${#numbers.formatInteger(scenario.passCount, 1, 'DEFAULT')}">12345</td>
                    <td class="value value-num value-tally" data-th-utext="${#numbers.formatInteger(scenario.failCount, 1, 'DEFAULT')}">10001</td>
                    <td class="value value-num value-tally " data-th-attrappend="class=${scenario.passCount == scenario.executed ? 'allPass' : 'hasFailure'}" data-th-utext="${#numbers.formatDecimal((scenario.passCount * 1.0 / scenario.executed) * 100, 1, 2, 'DEFAULT')} + '%'">98.12%</td>
                </tr>

                <th:block data-th-if="${scenario.nestedExecutions}" data-th-each="activity : ${scenario.nestedExecutions}">
                <tr class="record" data-th-class="${activity.failCount > 0 ? 'hasFailure' : 'noFailure'}">
                    <td colspan="2" class="value spacer2"></td>
                    <td class="value value-title" data-th-utext="${activity.name}" data-th-attr="title=${activity.name}">Act 1</td>

                    <td class="value value-datetime" data-th-utext="${#dates.format(new java.util.Date(activity.startTime), 'yyyy/MM/dd HH:mm:ss')}">2018/12/16 12:53:21</td>
                    <td class="value value-time" data-th-utext="${#dates.format(#dates.create(0,0,0,0,0,0, (activity.endTime - activity.startTime)), 'HH:mm:ss')}">00:42:11</td>
                    <td class="value value-num" data-th-utext="${#numbers.formatInteger(activity.executed, 1, 'DEFAULT')}">23456</td>
                    <td class="value value-num" data-th-utext="${#numbers.formatInteger(activity.passCount, 1, 'DEFAULT')}">12345</td>
                    <td class="value value-num" data-th-utext="${#numbers.formatInteger(activity.failCount, 1, 'DEFAULT')}">10001</td>
                    <td class="value value-num " data-th-attrappend="class=${activity.passCount == activity.executed ? 'allPass' : 'hasFailure'}" data-th-utext="${#numbers.formatDecimal((activity.passCount * 1.0 / activity.executed) * 100, 1, 2, 'DEFAULT')} + '%'">98.12%</td>
                </tr>
                </th:block>
                </th:block>
                </th:block>
            </table>
        </div>
    </div>
</div>

<br/>
<br/>
<br/>
<br/>
<div class="footer">powered by NEXIAL</div>
<br/>
<br/>

</body>
</html>
